<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Flask学习总结 | yookbu</title><meta name="description" content="Flask学习总结"><meta name="keywords" content="Flask"><meta name="author" content="yookbu"><meta name="copyright" content="yookbu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/ico.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://hm.baidu.com"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Flask学习总结"><meta name="twitter:description" content="Flask学习总结"><meta name="twitter:image" content="http://blog.yookbu.xyz/u=880031230,2978907864&amp;fm=26&amp;gp=0.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Flask学习总结"><meta property="og:url" content="http://www.yookbu.xyz/Flask%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"><meta property="og:site_name" content="yookbu"><meta property="og:description" content="Flask学习总结"><meta property="og:image" content="http://blog.yookbu.xyz/u=880031230,2978907864&amp;fm=26&amp;gp=0.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>const autoChangeMode = '2'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  const isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  const isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  const isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      now = new Date();
      hour = now.getHours();
      isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="http://www.yookbu.xyz/Flask%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/"><link rel="prev" title="Go语言学习记录" href="http://www.yookbu.xyz/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"><link rel="next" title="Git相关命令记录" href="http://www.yookbu.xyz/2020-05-15-Git%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.5/dist/instantsearch.min.js" defer></script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?66515106";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"GO0IH5SC16","apiKey":"e79cb2478747d4f1903466ea9c711ef2","indexName":"y ookbu","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://yookbu.xyz/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: 'Snackbar.bookmark.title',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: {"bookmark":{"title":"Snackbar.bookmark.title","message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#2d3035","position":"bottom-left"},
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: false,
  isFontAwesomeV5: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false
}</script><meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="yookbu" type="application/atom+xml">
</head><body><canvas class="fireworks"></canvas><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/2.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">30</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">17</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">3</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fa fa-heart"></i><span> 纪念</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-quora"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-mars-double" aria-hidden="true"></i><span> 进阶</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/%E7%AE%97%E6%B3%95/"><i class="fa-fw fa fa-gamepad"></i><span> 算法</span></a></li><li><a class="site-page" href="/categories/%E5%8A%9B%E6%89%A3/"><i class="fa-fw fa fa-paper-plane-o"></i><span> 力扣</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-list" aria-hidden="true"></i><span> 更多</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-tv"></i><span> 电影</span></a></li><li><a class="site-page" href="/photo/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask概述"><span class="toc-number">1.</span> <span class="toc-text">Flask概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#什么是Flask？"><span class="toc-number">1.1.</span> <span class="toc-text">什么是Flask？</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#WSGI"><span class="toc-number">1.2.</span> <span class="toc-text">WSGI</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Werkzeug"><span class="toc-number">1.3.</span> <span class="toc-text">Werkzeug</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jinja2"><span class="toc-number">1.4.</span> <span class="toc-text">jinja2</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask安装"><span class="toc-number">2.</span> <span class="toc-text">Flask安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask应用"><span class="toc-number">3.</span> <span class="toc-text">Flask应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask路由"><span class="toc-number">4.</span> <span class="toc-text">Flask路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask-URL构建"><span class="toc-number">5.</span> <span class="toc-text">Flask URL构建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#动态URL"><span class="toc-number">5.1.</span> <span class="toc-text">动态URL</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#url-for"><span class="toc-number">5.2.</span> <span class="toc-text">url_for</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask-Requestdt对象"><span class="toc-number">6.</span> <span class="toc-text">Flask Requestdt对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask模板应用"><span class="toc-number">7.</span> <span class="toc-text">Flask模板应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask-Cookies"><span class="toc-number">8.</span> <span class="toc-text">Flask Cookies</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-设置cookie："><span class="toc-number">8.1.</span> <span class="toc-text">1.设置cookie：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-获取cookie"><span class="toc-number">8.2.</span> <span class="toc-text">2.获取cookie</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-删除cookie"><span class="toc-number">8.3.</span> <span class="toc-text">3.删除cookie</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask-会话（Sessions）"><span class="toc-number">9.</span> <span class="toc-text">Flask 会话（Sessions）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flask文件上传"><span class="toc-number">10.</span> <span class="toc-text">Flask文件上传</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div class="post-bg" id="nav" style="background-image: url(http://blog.yookbu.xyz/u=880031230,2978907864&amp;fm=26&amp;gp=0.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">yookbu</a></span><span class="toggle-menu pull_right close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/love/"><i class="fa-fw fa fa-heart"></i><span> 纪念</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-quora"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-mars-double" aria-hidden="true"></i><span> 进阶</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/categories/%E7%AE%97%E6%B3%95/"><i class="fa-fw fa fa-gamepad"></i><span> 算法</span></a></li><li><a class="site-page" href="/categories/%E5%8A%9B%E6%89%A3/"><i class="fa-fw fa fa-paper-plane-o"></i><span> 力扣</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-th-list" aria-hidden="true"></i><span> 更多</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-tv"></i><span> 电影</span></a></li><li><a class="site-page" href="/photo/"><i class="fa-fw fa fa-photo"></i><span> 相册</span></a></li></ul></div></div></span><span class="pull_right" id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Flask学习总结</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 发表于 2020-08-26<span class="post-meta__separator">|</span><i class="fa fa-history fa-fw" aria-hidden="true"></i> 更新于 2020-08-27</time><div class="post-meta-wordcount"><i class="post-meta__icon fa-fw fa fa-file-word-o" aria-hidden="true"></i><span>字数总计:</span><span class="word-count">2.4k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa-fw fa fa-clock-o" aria-hidden="true"></i><span>阅读时长: 9 分钟</span><div class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon fa-fw" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span><span class="post-meta__separator">|</span><i class="post-meta__icon fa-fw fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><a href="/Flask%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/#post-comment" itemprop="discussionUrl"><span class="valine-comment-count comment-count" data-xid="/Flask%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/" itemprop="commentCount"></span></a></div></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h3 id="Flask概述"><a href="#Flask概述" class="headerlink" title="Flask概述"></a>Flask概述</h3><h4 id="什么是Flask？"><a href="#什么是Flask？" class="headerlink" title="什么是Flask？"></a>什么是Flask？</h4><p>Flask是一个用Python编写的Web应用程序框架。 它由 <strong>Armin Ronacher</strong> 开发，他领导一个名为Pocco的国际Python爱好者团队。 Flask基于Werkzeug WSGI工具包和Jinja2模板引擎。两者都是Pocco项目。</p>
<h4 id="WSGI"><a href="#WSGI" class="headerlink" title="WSGI"></a>WSGI</h4><p>Web Server Gateway Interface（Web服务器网关接口，WSGI）已被用作Python Web应用程序开发的标准。 WSGI是Web服务器和Web应用程序之间通用接口的规范。</p>
<h4 id="Werkzeug"><a href="#Werkzeug" class="headerlink" title="Werkzeug"></a>Werkzeug</h4><p>它是一个WSGI工具包，它实现了请求，响应对象和实用函数。 这使得能够在其上构建web框架。 Flask框架使用Werkzeug作为其基础之一。</p>
<h4 id="jinja2"><a href="#jinja2" class="headerlink" title="jinja2"></a>jinja2</h4><p>jinja2是Python的一个流行的模板引擎。Web模板系统将模板与特定数据源组合以呈现动态网页。<br>Flask通常被称为微框架。 它旨在保持应用程序的核心简单且可扩展。Flask没有用于数据库处理的内置抽象层，也没有形成验证支持。相反，Flask支持扩展以向应用程序添加此类功能。</p>
<h3 id="Flask安装"><a href="#Flask安装" class="headerlink" title="Flask安装"></a>Flask安装</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">pip install flask //本地安装了python环境后，使用pip安装，若速度较慢，可以考虑切换pip源</span><br><span class="line">pip config set <span class="keyword">global</span>.index-url https://mirrors.aliyun.com/pypi/simple/  </span><br><span class="line">/***</span><br><span class="line">附国内常用镜像源：</span><br><span class="line">阿里云：https://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">中国科技大学：https://pypi.mirrors.ustc.edu.cn/simple/</span><br><span class="line">清华大学：https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="line">***/</span><br></pre></td></tr></table></figure>

<h3 id="Flask应用"><a href="#Flask应用" class="headerlink" title="Flask应用"></a>Flask应用</h3><p><strong>Flask应用示例</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask //导入Flask模块</span><br><span class="line">app = Flask(__name__) //Falsk构造函数</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/') //route()函数是Flask装饰器，提供访问指定URL调用对应函数的入口。</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span>:</span></span><br><span class="line">	<span class="keyword">return</span> <span class="string">'Hello World'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__==<span class="string">'__main__'</span></span><br><span class="line">	app.run()</span><br></pre></td></tr></table></figure>

<p><strong>函数用法</strong>：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(rule,options)</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>rule</strong> 参数表示与该函数绑定的URL</li>
<li><strong>options</strong> 表示要转发给基础的Rule对象的参数列表</li>
</ul>
<p><strong>说明</strong>：在上示例应用中，’/‘URL与hello_world函数绑定，当浏览器打开web服务器时，将会呈现该函数的输出。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">app.run(host,port,debug,options) //本地服务器运行应用程序的入口</span><br></pre></td></tr></table></figure>

<p> <strong>参数说明</strong></p>
<table>
<thead>
<tr>
<th>序号</th>
<th>参数与描述</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><strong>host</strong><br />要监听的主机名，默认127.0.0.1(localhost).设置为“0.0.0.0”可以使服务器在外部可用</td>
</tr>
<tr>
<td>2</td>
<td><strong>port</strong><br />端口，默认5000</td>
</tr>
<tr>
<td>3</td>
<td><strong>debug</strong><br />默认为false。如果设置为true，提供调试信息</td>
</tr>
<tr>
<td>4</td>
<td><strong>options</strong><br />转发到底层的Werkzeug服务器</td>
</tr>
</tbody></table>
<p>运行上述<strong>Python</strong>脚本。在浏览器中打开（localhost:5000 或127.0.0.1:5000），输出”Hello World”消息。</p>
<h3 id="Flask路由"><a href="#Flask路由" class="headerlink" title="Flask路由"></a>Flask路由</h3><p><strong>路由</strong>： 不同的请求地址会交给路由处理来转发给相应的控制器处理，所以说路由就可以在转发前修改转发地址<br>Flask中的route()装饰器用于将URL绑定到函数。例如：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">@app.route(‘/hello’)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">   <span class="keyword">return</span> ‘hello world’</span><br></pre></td></tr></table></figure>

<p>在这里，URL ‘/ hello’ 规则绑定到hello_world()函数。 因此，如果用户访问http：// localhost：5000 / hello URLhello_world()函数的输出将在浏览器中呈现。<br>application对象的<strong>add_url_rule()</strong>函数也可用于将URL与函数绑定，如上例所示，使用<strong>route()</strong><br>装饰器的目的也由以下表示：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_world</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">   <span class="keyword">return</span> ‘hello world’</span><br><span class="line">app.add_url_rule(‘/’, ‘hello’, hello_world)</span><br></pre></td></tr></table></figure>

<h3 id="Flask-URL构建"><a href="#Flask-URL构建" class="headerlink" title="Flask URL构建"></a>Flask URL构建</h3><h4 id="动态URL"><a href="#动态URL" class="headerlink" title="动态URL"></a>动态URL</h4><p>通过给规则参数添加变量，可以构建动态URL。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route('/hello/&lt;name&gt;') //&lt;name&gt;为动态参数</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_name</span><span class="params">(name)</span>:</span></span><br><span class="line">   <span class="keyword">return</span> <span class="string">'Hello %s!'</span> % name</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">   app.run(debug = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>将上述脚本保存为<strong>hello.py</strong>并从Python shell运行它。接下来，打开浏览器并输入URL <strong>http:// localhost:5000/hello/w3cschool。</strong></p>
<p>以下输出将显示在浏览器中:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello w3cschool!</span><br></pre></td></tr></table></figure>

<p>lask的URL规则基于<strong>Werkzeug</strong>的路由模块。这确保形成的URL是唯一的，并且基于Apache规定的先例。</p>
<p>考虑以下脚本中定义的规则：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask</span><br><span class="line">app = Flask(__name_<span class="number">_</span>)</span><br><span class="line"></span><br><span class="line">@app.route(<span class="string">'/flask'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_flask</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">   <span class="keyword">return</span> <span class="string">'Hello Flask'</span></span><br><span class="line"></span><br><span class="line">@app.route(<span class="string">'/python/'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_python</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">   <span class="keyword">return</span> <span class="string">'Hello Python'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name_<span class="number">_</span> == <span class="string">'__main__'</span><span class="symbol">:</span></span><br><span class="line">   app.run()</span><br></pre></td></tr></table></figure>

<p>这两个规则看起来类似，但在第二个规则中，使用斜杠<strong>（/）</strong>。因此，它成为一个规范的URL。因此，使用 <strong>/python</strong> 或 <strong>/python/</strong>返回相同的输出。但是，如果是第一个规则，<strong>/flask/ URL</strong>会产生“404 Not Found”页面。</p>
<h4 id="url-for"><a href="#url-for" class="headerlink" title="url_for"></a><strong>url_for</strong></h4><p><strong>url_for()</strong>函数对于动态构建特定函数的URL非常有用。该函数接受函数的名称作为第一个参数，以及一个或多个关键字参数，每个参数对应于URL的变量部分。</p>
<p>以下脚本演示了如何使用<strong>url_for()</strong>函数：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, redirect, url_for</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"><span class="meta">@app.route('/admin')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_admin</span><span class="params">()</span>:</span></span><br><span class="line">   <span class="keyword">return</span> <span class="string">'Hello Admin'</span></span><br><span class="line"><span class="meta">@app.route('/guest/&lt;guest&gt;')def hello_guest(guest):</span></span><br><span class="line">   <span class="keyword">return</span> <span class="string">'Hello %s as Guest'</span> % guest</span><br><span class="line"><span class="meta">@app.route('/user/&lt;name&gt;')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello_user</span><span class="params">(name)</span>:</span></span><br><span class="line">   <span class="keyword">if</span> name ==<span class="string">'admin'</span>:</span><br><span class="line">      <span class="keyword">return</span> redirect(url_for(<span class="string">'hello_admin'</span>))</span><br><span class="line">   <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">return</span> redirect(url_for(<span class="string">'hello_guest'</span>,guest = name))</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">   app.run(debug = <span class="literal">True</span>)</span><br></pre></td></tr></table></figure>

<p>上述脚本有一个函数<strong>user(name)</strong>，它接受来自URL的参数的值。</p>
<p><strong>User()</strong>函数检查接收的参数是否与<strong>‘admin’</strong>匹配。如果匹配，则使用<strong>url_for()</strong>将应用程序重定向到<strong>hello_admin()</strong>函数，否则重定向到将接收的参数作为guest参数传递给它的<strong>hello_guest()</strong>函数。</p>
<p>保存上面的代码并从Python shell运行。</p>
<p>打开浏览器并输入URL - <strong><a href="http://localhost:5000/hello/admin" target="_blank" rel="noopener">http://localhost:5000/user/admin</a></strong></p>
<p>浏览器中的应用程序响应是：</p>
<figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">Hello Admin</span></span><br></pre></td></tr></table></figure>

<p>在浏览器中输入以下URL - <strong><a href="http://localhost:5000/hello/mvl" target="_blank" rel="noopener">http://localhost:5000/user/mvl</a></strong></p>
<p>应用程序响应现在更改为：</p>
<figure class="highlight actionscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hello mvl <span class="keyword">as</span> Guest</span><br></pre></td></tr></table></figure>

<h3 id="Flask-Requestdt对象"><a href="#Flask-Requestdt对象" class="headerlink" title="Flask Requestdt对象"></a>Flask Requestdt对象</h3><p>来自客户端网页 的数据作为全局请求对象发送到服务器。为了处理请求数据，应该从Flask模块导入。</p>
<p>Request对象的重要属性如下所列：</p>
<ul>
<li><strong>Form</strong> - 它是一个字典对象，包含表单参数及其值的键和值对。</li>
<li><strong>args</strong> - 解析查询字符串的内容，它是问号（？）之后的URL的一部分。</li>
<li><strong>Cookies</strong> - 保存Cookie名称和值的字典对象。</li>
<li><strong>files</strong> - 与上传文件有关的数据。</li>
<li><strong>method</strong> - 当前请求方法。</li>
</ul>
<h3 id="Flask模板应用"><a href="#Flask模板应用" class="headerlink" title="Flask模板应用"></a>Flask模板应用</h3><p>可以在 URL 规则中指定 http 方法。触发函数接收的 <strong>Form</strong> 数据可以以字典对象的形式收集它并将其转发到模板以在相应的网页上呈现它。</p>
<p>在以下示例中，<strong>‘/‘ URL</strong> 会呈现具有表单的网页（student.html）。填入的数据会发布到触发 <strong>result()</strong> 函数的 <strong>‘/result’ URL</strong>。</p>
<p><strong>results()</strong> 函数收集字典对象中的 <strong>request.form</strong> 中存在的表单数据，并将其发送给 <strong>result.html</strong>。</p>
<p>该模板动态呈现<strong>表单</strong>数据的 HTML 表格。</p>
<p>下面给出的是应用程序的 Python 代码：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask, render_template, request</span><br><span class="line">app = Flask(name)</span><br><span class="line">@app.route(<span class="string">'/'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">student</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">   <span class="keyword">return</span> render_template(<span class="string">'student.html'</span>)</span><br><span class="line">@app.route(<span class="string">'/result'</span>,methods = [<span class="string">'POST'</span>, <span class="string">'GET'</span>])</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">result</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">   <span class="keyword">if</span> request.method == <span class="string">'POST'</span><span class="symbol">:</span></span><br><span class="line">      result = request.form</span><br><span class="line">      <span class="keyword">return</span> render_template(<span class="string">"result.html"</span>,result = result)</span><br><span class="line"><span class="keyword">if</span> name == <span class="string">'main'</span><span class="symbol">:</span></span><br><span class="line">   app.run(debug = True)</span><br></pre></td></tr></table></figure>

<p>下面给出的是 <strong>student.html</strong> 的 HTML 脚本。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"http://localhost:5000/result&amp;quot"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Name <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"Name"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Physics <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"Physics"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Chemistry <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"chemistry"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Maths <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> =<span class="string">"text"</span> <span class="attr">name</span> = <span class="string">"Mathematics"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"submit"</span> <span class="attr">value</span> = <span class="string">"submit"</span> /&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>下面给出了模板<strong>（ result.html ）</strong>的代码：</p>
<figure class="highlight django"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="meta">&lt;!doctype <span class="meta-keyword">html</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span> = <span class="string">1</span>&gt;</span></span></span><br><span class="line"><span class="xml">     </span><span class="template-tag">&#123;% <span class="name"><span class="name">for</span></span> key, value <span class="keyword">in</span> result.items() %&#125;</span></span><br><span class="line"><span class="xml">    <span class="symbol">&amp;lt;</span>tr<span class="symbol">&amp;gt;</span></span></span><br><span class="line"><span class="xml">       <span class="symbol">&amp;lt;</span>th<span class="symbol">&amp;gt;</span> </span><span class="template-variable">&#123;&#123; key &#125;&#125;</span><span class="xml"> <span class="symbol">&amp;lt;</span>/th<span class="symbol">&amp;gt;</span></span></span><br><span class="line"><span class="xml">       <span class="symbol">&amp;lt;</span>td<span class="symbol">&amp;gt;</span> </span><span class="template-variable">&#123;&#123; value &#125;&#125;</span><span class="xml"> <span class="symbol">&amp;lt;</span>/td<span class="symbol">&amp;gt;</span></span></span><br><span class="line"><span class="xml">    <span class="symbol">&amp;lt;</span>/tr<span class="symbol">&amp;gt;</span></span></span><br><span class="line"><span class="xml"> </span><span class="template-tag">&#123;% <span class="name"><span class="name">endfor</span></span> %&#125;</span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="Flask-Cookies"><a href="#Flask-Cookies" class="headerlink" title="Flask Cookies"></a>Flask Cookies</h3><p><strong>Request</strong>对象包含Cookie的属性，他是所有Cookie变量及对应值的字典对象，客户端已传输。除此之外，cookie还储存其网站的到期时间，路径和域名。<br>在Flask中对cookie的操作主要有</p>
<h4 id="1-设置cookie："><a href="#1-设置cookie：" class="headerlink" title="1.设置cookie："></a>1.设置cookie：</h4><p>设置cookie,默认有效期是临时cookie,浏览器关闭就失效</p>
<p>  可以通过 max_age 设置有效期， 单位是秒</p>
<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">resp</span> = make_response(<span class="string">"success"</span>)   <span class="comment"># 设置响应体</span></span><br><span class="line">resp.set_cookie(<span class="string">"w3cshool"</span>, <span class="string">"w3cshool"</span>, <span class="attr">max_age=3600)</span></span><br></pre></td></tr></table></figure>

<h4 id="2-获取cookie"><a href="#2-获取cookie" class="headerlink" title="2.获取cookie"></a>2.获取cookie</h4><p>  获取cookie，通过reques.cookies的方式， 返回的是一个字典，可以获取字典里的相应的值</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">cookie_1</span> = request.cookies.get(<span class="string">"w3cshool"</span>)</span><br></pre></td></tr></table></figure>

<h4 id="3-删除cookie"><a href="#3-删除cookie" class="headerlink" title="3.删除cookie"></a>3.删除cookie</h4><p>  这里的删除只是让cookie过期，并不是直接删除cookie</p>
<p>  删除cookie，通过delete_cookie()的方式， 里面是cookie的名字</p>
<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">resp = make_response(<span class="string">"del success"</span>)  <span class="comment"># 设置响应体</span></span><br><span class="line">resp.delete_cookie(<span class="string">"w3cshool"</span>)</span><br></pre></td></tr></table></figure>

<p>以下为Flask Cookies的简单示例：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from flask import Flask, make_response, request</span><br><span class="line"></span><br><span class="line">app = Flask(__name_<span class="number">_</span>)</span><br><span class="line"></span><br><span class="line">@app.route(<span class="string">"/set_cookies"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_cookie</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">    resp = make_response(<span class="string">"success"</span>)</span><br><span class="line">    resp.set_cookie(<span class="string">"w3cshool"</span>, <span class="string">"w3cshool"</span>,max_age=<span class="number">3600</span>)    <span class="keyword">return</span> resp</span><br><span class="line"></span><br><span class="line">@app.route(<span class="string">"/get_cookies"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_cookie</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">    cookie_1 = request.cookies.get(<span class="string">"w3cshool"</span>)  <span class="comment"># 获取名字为Itcast_1对应cookie的值</span></span><br><span class="line">    <span class="keyword">return</span> cookie_1</span><br><span class="line"></span><br><span class="line">@app.route(<span class="string">"/delete_cookies"</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">delete_cookie</span><span class="params">()</span></span><span class="symbol">:</span></span><br><span class="line">    resp = make_response(<span class="string">"del success"</span>)</span><br><span class="line">    resp.delete_cookie(<span class="string">"w3cshool"</span>)</span><br><span class="line">    <span class="keyword">return</span> resp</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name_<span class="number">_</span> == <span class="string">'__main__'</span><span class="symbol">:</span></span><br><span class="line">    app.run(debug=True)</span><br></pre></td></tr></table></figure>

<p>设置cookies</p>
<p>运行应用程序，在浏览器中输入 127.0.0.1:5000/set_cookies 来设置cookies，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">注意删除，只是让 cookie 过期。</span><br></pre></td></tr></table></figure>

<h3 id="Flask-会话（Sessions）"><a href="#Flask-会话（Sessions）" class="headerlink" title="Flask 会话（Sessions）"></a>Flask 会话（Sessions）</h3><p>与Cookie不同，<strong>Session</strong>数据存储在服务器上，</p>
<h3 id="Flask文件上传"><a href="#Flask文件上传" class="headerlink" title="Flask文件上传"></a>Flask文件上传</h3><p>处理文件上传需要一个HTML表单，将其entype属性设置为‘multipart/from-data’，通过request.files[file]对象的filename获取。可以在flask对象的配置设置中定义文件路径及大小限定。</p>
<table>
<thead>
<tr>
<th>app.config[‘UPLOAD_FOLDER’]</th>
<th>定义上传文件夹的路径</th>
</tr>
</thead>
<tbody><tr>
<td>app.config[‘MAX_CONTENT_PATH’]</td>
<td>指定要上传的文件的最大大小（以字节为单位）</td>
</tr>
</tbody></table>
<p>以下代码具有’<strong>/ upload’</strong> URL规则，该规则在templates文件夹中显示’<strong>upload.html’</strong>，以及<strong>‘/ upload-file’</strong> URL规则，用于调用<strong>uploader()</strong>函数处理上传过程。</p>
<p><strong>‘upload.html’</strong>有一个文件选择器按钮和一个提交按钮。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">   </span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span> = <span class="string">"http://localhost:5000/uploader"</span> <span class="attr">method</span> = <span class="string">"POST"</span> </span></span><br><span class="line"><span class="tag">         <span class="attr">enctype</span> = <span class="string">"multipart/form-data"</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"file"</span> <span class="attr">name</span> = <span class="string">"file"</span> /&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span> = <span class="string">"submit"</span>/&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">      </span><br><span class="line">   <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>您将看到如下所示的界面。</p>
<p><img src="/" alt="Flask File Uploading" class="lazyload" data-src="https://atts.w3cschool.cn/attachments/tuploads/flask/flask_file_uploading.jpg"></p>
<p>选择文件后，单击<strong>提交</strong>。表单的post方法调用<strong>‘/ upload_file’ URL</strong>。底层函数<strong>uploader()</strong>执行保存操作。</p>
<p>以下是Flask应用程序的Python代码。</p>
<figure class="highlight oxygene"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask import Flask, render_template, request</span><br><span class="line"><span class="keyword">from</span> werkzeug import secure_filename</span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line">@app.route(<span class="string">'/upload'</span>)</span><br><span class="line">def upload_file():</span><br><span class="line">   return render_template(<span class="string">'upload.html'</span>)</span><br><span class="line">	</span><br><span class="line">@app.route(<span class="string">'/uploader'</span>, methods = [<span class="string">'GET'</span>, <span class="string">'POST'</span>])</span><br><span class="line">def upload_file():</span><br><span class="line">   <span class="keyword">if</span> request<span class="function">.<span class="keyword">method</span> == '<span class="title">POST</span>':</span></span><br><span class="line">      f = request.files[<span class="string">'file'</span>]</span><br><span class="line">      f.save(secure_filename(f.filename))</span><br><span class="line">      return <span class="string">'file uploaded successfully'</span></span><br><span class="line">		</span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">   app.run(debug = <span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">yookbu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://www.yookbu.xyz/Flask%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/">http://www.yookbu.xyz/Flask%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://www.yookbu.xyz">yookbu</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Flask/">Flask    </a></div><div class="post_share"><div class="social-share" data-image="/img/simple/peace.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lazyload post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/Go%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"><img class="prev_cover lazyload" data-src="/img/simple/peace.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Go语言学习记录</div></div></a></div><div class="next-post pull_right"><a href="/2020-05-15-Git%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95/"><img class="next_cover lazyload" data-src="/img/simple/peace.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Git相关命令记录</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'nick,mail,link'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify: true,
  verify: true,
  appId: 'VhUbk6eVdO5fbcsMkOa2HFFk-gzGzoHsz',
  appKey: 'DroCO5Q8g8I1qODknW8XMC4z',
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guest_info,
  pageSize: '10',
  lang: 'en',
  recordIP: true,
  serverURLs: ''
});</script></div></article></main><footer id="footer" style="background-image: url(http://blog.yookbu.xyz/u=880031230,2978907864&amp;fm=26&amp;gp=0.jpg)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By yookbu</div><div class="footer_custom_text">只有能被明日的我们铭记，今天才有意义</div><div class="icp"><a href="http://www.beian.miit.gov.cn/" target="_blank" rel="noopener"><img class="icp-icon" src="https://cdn.jsdelivr.net/gh/yookbu/yookbu.github.io@master/img/icp.png"/><span>备案号：宁ICP备20000124号</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="false" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/search/algolia.js"></script></body></html>